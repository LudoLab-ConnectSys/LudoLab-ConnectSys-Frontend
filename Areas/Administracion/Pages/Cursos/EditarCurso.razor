@inject NavigationManager NavigationManager

@page "/editar-curso/{CursoId:int}"

<h3>Editar Curso</h3>

@if (curso == null)
{
    <p><em>Cargando...</em></p>
}
else
{
    <EditForm Model="curso" OnValidSubmit="GuardarCambios">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group">
            <label for="nombre">Nombre:</label>
            <InputText id="nombre" class="form-control" @bind-Value="curso.Nombre" />
        </div>

        <div class="form-group">
            <label for="periodo">Periodo:</label>
            <InputText id="periodo" class="form-control" @bind-Value="curso.Periodo" />
        </div>

        <div class="form-group">
            <label for="descripcion">Descripción:</label>
            <InputTextArea id="descripcion" class="form-control" @bind-Value="curso.Descripcion" />
        </div>

        <button type="submit" class="btn btn-success">Guardar</button>
    </EditForm>
}

@code {
    [Parameter]
    public int CursoId { get; set; }

    private Curso curso;

    // Datos simulados para el ejemplo
    private List<Curso> cursos = new List<Curso>
    {
        new Curso { Id = 1, Nombre = "Curso de Blazor", Periodo = "2023", Descripcion = "Aprende Blazor desde cero." },
        new Curso { Id = 2, Nombre = "Curso Avanzado de ASP.NET Core", Periodo = "2023", Descripcion = "Profundiza en ASP.NET Core y técnicas avanzadas." }
    };

    protected override void OnInitialized()
    {
        curso = cursos.FirstOrDefault(c => c.Id == CursoId);
    }

    private void GuardarCambios()
    {
        // Aquí normalmente llamarías al backend para actualizar los datos
        // Mostramos un mensaje simple por ahora
        Console.WriteLine($"Curso actualizado: {curso.Nombre}");
        // Simulamos la navegación
        NavigationManager.NavigateTo("/cursos");
    }


    public class Curso
    {
        public int Id { get; set; }
        public string Nombre { get; set; }
        public string Periodo { get; set; }
        public string Descripcion { get; set; }
    }
}


